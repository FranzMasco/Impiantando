<!DOCTYPE html>
<html>
    <head>
        <title> Gestione Centro Sportivo Admin </title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="script.js"></script>
        <script>
            function admin_homepage(){
                var username = getCookie("username");
                var user_id = getCookie("user_id");
                var token = getCookie("token");
                var user_level = getCookie("user_level");
                var sport_center_name = getCookie("sport_center_name");
                var sport_center_id = getCookie("sport_center_id");
                //console.log(username);
                //console.log(user_id);
                //console.log(token);
                var outputJS = document.getElementById("outputJS");

                if(username=="" || user_id=="" || token=="" || user_level=="" || user_level!="administrator"){
                    outputJS.innerHTML =
                    `
                        <p>Authentication required</p>
                        <a href="index.html">Homepage</a>
                    `;
                }else{
                    outputJS.innerHTML =
                    `
                    <p><b>Administrator user: </b>`+username+`</p>
                    <p><b>Sport center: </b>`+sport_center_name+`</p>
                    <br>
                    <button onclick="show_insert_form()">Add new sport facility</button>
                    <div id="insertNewFacility" hidden="true">
                        <br>
                        <p>Fill the following gaps in order to registrer a new sport facility in your sport center</p>
                        <input type="text" id="insertNewFacility_name" name="name" placeholder="Insert name new facility..."><br>
                        <textarea name="description" id="insertNewFacility_description" rows="4" cols="50" placeholder="Insert description..."></textarea><br>
                        <input type="button" name="confirm_insert" value="Confirm" onclick="concole.log('ciao')">
                        <input type="button" name="cancel_insert" value="Cancel" onclick="close_insert_form()">
                        <br>
                    </div>
                    <br>
                    <hr>
                    <p>Here is the list of the sport facilities that has been inserted: </p><br>
                    <div id="output_facilities">
                        There are no sport facilities registered yet
                    </div>
                    <br>
                    `;
                    loadFacilities_administrator(sport_center_id);
                }

            }
            
            //Hide sport facility modification form
            function close_form(id_sport_facility){
                document.getElementById("editForm"+id_sport_facility).hidden=true
            }

            //Show sport facility modification form
            function show_form(id_sport_facility){
                document.getElementById("editForm"+id_sport_facility).hidden=false
            }
            
            //Show form to insert a new sport facility
            function show_insert_form(){
                document.getElementById("insertNewFacility").hidden=false
            }

            //Show form to insert a new sport facility
            function close_insert_form(){
                //reset fields
                document.getElementById("insertNewFacility_name").value="";
                document.getElementById("insertNewFacility_description").value="";
                
                document.getElementById("insertNewFacility").hidden=true;
            }

        </script>
    </head>
    <body>
        <h1>Impiantando</h1>
        <div id="outputJS"></div>
        <script>admin_homepage()</script>
    </body>
</html>